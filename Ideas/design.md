Файл, в котором описываются все проблемы и решения, возникшие в процессе работы.
Первое с чем необходимо разобраться - интерфейс для отладки обработки изображения.
Это должно выглядеть как конвейер, в котором можно менять параметры и заменять или добавлять элементы.

Для хорошего нахождения линий необходимо придумать алгоритм, который будет выделять линии, которые сходятся в одной точке, в принципе это можно сделать за n^3 выбираем две линии, смотрим точку пересечения, смотрим, сколько туда попало, голосуем за лучшую, ещё можно сделать специальный оператор Собеля для горизонтальных линий и для тех, которых сходятся в одну точку, ещё можно попросить пользователя нарисовать пару линий, чтобы было удобнее находить оператор для линий, которые сходятся в одной точке.  
Стоит при нахождении токи удалить всё линии, которые находятся вокруг неё, из-за особенностей городской застройки.

Как выяснилось главная проблема в нахождении точки пересечения линий перспективы, это деревья, они добавляют очень много шума на детекторы границ, надо придумать как с ними бороться. Есть два варианта борьбы, во-первых использовать правильные фильтры, которые будут затирать частые смены градиента. Например, можно попробовать блюр с большой матрицей и небольшим коэффициентом, он будет меньше отражаться на границах больших объектов. Во вторых можно попробовать придумать алгоритм, который будет находить большое скопление границ и определять, являются ли они тем чем нам нужно. Например, можно попробовать начать искать прямые преобразованием Хаффмана на этом небольшом участке, вырезав его из всей картинки и посмотреть, близки ли к параллельности получившиеся прямые.

Что ещё: есть идея переделать преобразование Хаффмана, суть в том, что мы будем выбирать те прямые вокруг которых мало голосов. (которые находятся в гордом одиночестве)

К тому же надо разобраться с коэффициентами, как минимум вынести все в отдельное место, чтобы можно было удобно управлять процессом обработки изображения, как максимум автоматизировать подбор коэффициентов исходя из каких-то соображений, которые я ещё не придумал.

